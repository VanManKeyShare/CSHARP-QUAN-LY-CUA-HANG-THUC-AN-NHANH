USE [QLCH_THUC_AN_NHANH]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[DON_VI_TINH](
	[MA_DVT] [varchar](50) NOT NULL,
	[TEN_DVT] [nvarchar](100) NOT NULL,
 CONSTRAINT [PK_DON_VI_TINH] PRIMARY KEY CLUSTERED 
(
	[MA_DVT] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[DON_VI_TINH] ([MA_DVT], [TEN_DVT]) VALUES (N'BANH', N'BÁNH')
INSERT [dbo].[DON_VI_TINH] ([MA_DVT], [TEN_DVT]) VALUES (N'CHAI', N'CHAI')
INSERT [dbo].[DON_VI_TINH] ([MA_DVT], [TEN_DVT]) VALUES (N'DIA', N'DĨA')
INSERT [dbo].[DON_VI_TINH] ([MA_DVT], [TEN_DVT]) VALUES (N'LON', N'LON')
INSERT [dbo].[DON_VI_TINH] ([MA_DVT], [TEN_DVT]) VALUES (N'PHAN', N'PHẦN')
INSERT [dbo].[DON_VI_TINH] ([MA_DVT], [TEN_DVT]) VALUES (N'TO', N'TÔ')
INSERT [dbo].[DON_VI_TINH] ([MA_DVT], [TEN_DVT]) VALUES (N'XIEN', N'XIÊN')

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DON_HANG](
	[MA_DH] [int] IDENTITY(1,1) NOT NULL,
	[THANH_TIEN] [int] NOT NULL,
	[THOI_GIAN_TAO_DH] [datetime] NOT NULL,
	[THOI_GIAN_THANH_TOAN] [datetime] NULL,
 CONSTRAINT [PK_DON_HANG] PRIMARY KEY CLUSTERED 
(
	[MA_DH] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET IDENTITY_INSERT [dbo].[DON_HANG] ON
INSERT [dbo].[DON_HANG] ([MA_DH], [THANH_TIEN], [THOI_GIAN_TAO_DH], [THOI_GIAN_THANH_TOAN]) VALUES (1, 214000, CAST(0x0000A5C800E527FB AS DateTime), CAST(0x0000A5C800E549BD AS DateTime))
INSERT [dbo].[DON_HANG] ([MA_DH], [THANH_TIEN], [THOI_GIAN_TAO_DH], [THOI_GIAN_THANH_TOAN]) VALUES (2, 351000, CAST(0x0000A5C800E53DC8 AS DateTime), NULL)
SET IDENTITY_INSERT [dbo].[DON_HANG] OFF

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[BAN_AN](
	[MA_BAN] [varchar](50) NOT NULL,
	[TEN_BAN] [nvarchar](100) NOT NULL,
 CONSTRAINT [PK_BAN_AN] PRIMARY KEY CLUSTERED 
(
	[MA_BAN] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[BAN_AN] ([MA_BAN], [TEN_BAN]) VALUES (N'BAN_01', N'BÀN SỐ 01')
INSERT [dbo].[BAN_AN] ([MA_BAN], [TEN_BAN]) VALUES (N'BAN_02', N'BÀN SỐ 02')
INSERT [dbo].[BAN_AN] ([MA_BAN], [TEN_BAN]) VALUES (N'BAN_03', N'BÀN SỐ 03')
INSERT [dbo].[BAN_AN] ([MA_BAN], [TEN_BAN]) VALUES (N'BAN_04', N'BÀN SỐ 04')
INSERT [dbo].[BAN_AN] ([MA_BAN], [TEN_BAN]) VALUES (N'BAN_05', N'BÀN SỐ 05')

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[NHAN_VIEN](
	[TAI_KHOAN] [varchar](50) NOT NULL,
	[MAT_KHAU] [nvarchar](100) NOT NULL,
	[HO_TEN] [nvarchar](100) NOT NULL,
	[SDT] [varchar](100) NOT NULL,
	[QUYEN_HAN] [int] NOT NULL,
 CONSTRAINT [PK_NHAN_VIEN] PRIMARY KEY CLUSTERED 
(
	[TAI_KHOAN] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY],
 CONSTRAINT [UNIQUE_01_NHAN_VIEN] UNIQUE NONCLUSTERED 
(
	[SDT] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[NHAN_VIEN] ([TAI_KHOAN], [MAT_KHAU], [HO_TEN], [SDT], [QUYEN_HAN]) VALUES (N'admin', N'1234', N'Nguyễn Văn Mẫn', N'0938848351', 1)
INSERT [dbo].[NHAN_VIEN] ([TAI_KHOAN], [MAT_KHAU], [HO_TEN], [SDT], [QUYEN_HAN]) VALUES (N'nv', N'1234', N'Nhân Viên', N'0999999999', 0)

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[LOAI_HANG](
	[MA_LH] [varchar](50) NOT NULL,
	[TEN_LH] [nvarchar](100) NOT NULL,
 CONSTRAINT [PK_LOAI_HANG] PRIMARY KEY CLUSTERED 
(
	[MA_LH] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[LOAI_HANG] ([MA_LH], [TEN_LH]) VALUES (N'MON_CHINH', N'MÓN CHÍNH')
INSERT [dbo].[LOAI_HANG] ([MA_LH], [TEN_LH]) VALUES (N'MON_PHU', N'MÓN PHỤ')
INSERT [dbo].[LOAI_HANG] ([MA_LH], [TEN_LH]) VALUES (N'NUOC_GIAI_KHAT', N'NƯỚC GIẢI KHÁT')
INSERT [dbo].[LOAI_HANG] ([MA_LH], [TEN_LH]) VALUES (N'RUOU_BIA', N'RƯỢU BIA')
INSERT [dbo].[LOAI_HANG] ([MA_LH], [TEN_LH]) VALUES (N'THUOC_LA', N'THUỐC LÁ')

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[HANG_HOA](
	[MA_HH] [int] IDENTITY(1,1) NOT NULL,
	[MA_LH] [varchar](50) NOT NULL,
	[MA_DVT] [varchar](50) NOT NULL,
	[TEN_HH] [nvarchar](100) NOT NULL,
	[SO_LUONG] [int] NOT NULL,
	[DON_GIA] [int] NOT NULL,
 CONSTRAINT [PK_HANG_HOA] PRIMARY KEY CLUSTERED 
(
	[MA_HH] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
SET IDENTITY_INSERT [dbo].[HANG_HOA] ON
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (1, N'MON_CHINH', N'BANH', N'BÁNH MỲ VỊT QUAY', 998, 17000)
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (2, N'NUOC_GIAI_KHAT', N'LON', N'PEPSI', 1000, 10000)
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (3, N'NUOC_GIAI_KHAT', N'LON', N'COCA COLA', 997, 10000)
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (4, N'NUOC_GIAI_KHAT', N'CHAI', N'NƯỚC SUỐI LAVIE', 1000, 8000)
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (5, N'MON_CHINH', N'PHAN', N'SƯỜN NƯỚNG XỐT BBQ', 998, 50000)
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (6, N'MON_CHINH', N'PHAN', N'BÒ LÚC LẮC KHAI TÂY', 998, 58000)
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (7, N'MON_PHU', N'DIA', N'KHOAI TÂY CHIÊN', 997, 25000)
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (8, N'MON_PHU', N'DIA', N'NGÔ CHIÊN', 998, 25000)
INSERT [dbo].[HANG_HOA] ([MA_HH], [MA_LH], [MA_DVT], [TEN_HH], [SO_LUONG], [DON_GIA]) VALUES (9, N'MON_CHINH', N'PHAN', N'GÀ RÁN', 998, 80000)
SET IDENTITY_INSERT [dbo].[HANG_HOA] OFF

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[DON_HANG_CHI_TIET](
	[MA_DH] [int] NOT NULL,
	[MA_BAN] [varchar](50) NOT NULL,
	[MA_HH] [int] NOT NULL,
	[SO_LUONG] [int] NOT NULL,
	[DON_GIA] [int] NOT NULL,
	[THANH_TIEN]  AS ([SO_LUONG]*[DON_GIA])
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[DON_HANG_CHI_TIET] ([MA_DH], [MA_BAN], [MA_HH], [SO_LUONG], [DON_GIA]) VALUES (1, N'BAN_01', 1, 2, 17000)
INSERT [dbo].[DON_HANG_CHI_TIET] ([MA_DH], [MA_BAN], [MA_HH], [SO_LUONG], [DON_GIA]) VALUES (1, N'BAN_03', 5, 2, 50000)
INSERT [dbo].[DON_HANG_CHI_TIET] ([MA_DH], [MA_BAN], [MA_HH], [SO_LUONG], [DON_GIA]) VALUES (1, N'BAN_03', 3, 3, 10000)
INSERT [dbo].[DON_HANG_CHI_TIET] ([MA_DH], [MA_BAN], [MA_HH], [SO_LUONG], [DON_GIA]) VALUES (1, N'BAN_03', 8, 2, 25000)
INSERT [dbo].[DON_HANG_CHI_TIET] ([MA_DH], [MA_BAN], [MA_HH], [SO_LUONG], [DON_GIA]) VALUES (2, N'BAN_01', 6, 2, 58000)
INSERT [dbo].[DON_HANG_CHI_TIET] ([MA_DH], [MA_BAN], [MA_HH], [SO_LUONG], [DON_GIA]) VALUES (2, N'BAN_01', 7, 3, 25000)
INSERT [dbo].[DON_HANG_CHI_TIET] ([MA_DH], [MA_BAN], [MA_HH], [SO_LUONG], [DON_GIA]) VALUES (2, N'BAN_01', 9, 2, 80000)

ALTER TABLE [dbo].[DON_HANG] ADD  CONSTRAINT [DF_DON_HANG_THANH_TIEN]  DEFAULT ((0)) FOR [THANH_TIEN]
GO

ALTER TABLE [dbo].[DON_HANG] ADD  CONSTRAINT [DF_DON_HANG_NGAY_TAO_DH]  DEFAULT (getdate()) FOR [THOI_GIAN_TAO_DH]
GO

ALTER TABLE [dbo].[DON_HANG_CHI_TIET] ADD  CONSTRAINT [DF_DON_HANG_CHI_TIET_SO_LUONG]  DEFAULT ((0)) FOR [SO_LUONG]
GO

ALTER TABLE [dbo].[DON_HANG_CHI_TIET] ADD  CONSTRAINT [DF_DON_HANG_CHI_TIET_DON_GIA]  DEFAULT ((0)) FOR [DON_GIA]
GO

ALTER TABLE [dbo].[HANG_HOA] ADD  CONSTRAINT [DF_HANG_HOA_SO_LUONG]  DEFAULT ((0)) FOR [SO_LUONG]
GO

ALTER TABLE [dbo].[HANG_HOA] ADD  CONSTRAINT [DF_HANG_HOA_DON_GIA]  DEFAULT ((0)) FOR [DON_GIA]
GO

ALTER TABLE [dbo].[NHAN_VIEN] ADD  CONSTRAINT [DF_NHAN_VIEN_QUYEN_HAN]  DEFAULT ((0)) FOR [QUYEN_HAN]
GO

ALTER TABLE [dbo].[DON_HANG_CHI_TIET]  WITH CHECK ADD  CONSTRAINT [FK_01_DON_HANG] FOREIGN KEY([MA_DH])
REFERENCES [dbo].[DON_HANG] ([MA_DH])
GO
ALTER TABLE [dbo].[DON_HANG_CHI_TIET] CHECK CONSTRAINT [FK_01_DON_HANG]
GO

ALTER TABLE [dbo].[DON_HANG_CHI_TIET]  WITH CHECK ADD  CONSTRAINT [FK_02_DON_HANG] FOREIGN KEY([MA_BAN])
REFERENCES [dbo].[BAN_AN] ([MA_BAN])
GO
ALTER TABLE [dbo].[DON_HANG_CHI_TIET] CHECK CONSTRAINT [FK_02_DON_HANG]
GO

ALTER TABLE [dbo].[DON_HANG_CHI_TIET]  WITH CHECK ADD  CONSTRAINT [FK_03_DON_HANG] FOREIGN KEY([MA_HH])
REFERENCES [dbo].[HANG_HOA] ([MA_HH])
GO
ALTER TABLE [dbo].[DON_HANG_CHI_TIET] CHECK CONSTRAINT [FK_03_DON_HANG]
GO

ALTER TABLE [dbo].[HANG_HOA]  WITH CHECK ADD  CONSTRAINT [FK_01_HANG_HOA] FOREIGN KEY([MA_LH])
REFERENCES [dbo].[LOAI_HANG] ([MA_LH])
GO
ALTER TABLE [dbo].[HANG_HOA] CHECK CONSTRAINT [FK_01_HANG_HOA]
GO

ALTER TABLE [dbo].[HANG_HOA]  WITH CHECK ADD  CONSTRAINT [FK_02_HANG_HOA] FOREIGN KEY([MA_DVT])
REFERENCES [dbo].[DON_VI_TINH] ([MA_DVT])
GO
ALTER TABLE [dbo].[HANG_HOA] CHECK CONSTRAINT [FK_02_HANG_HOA]
GO
